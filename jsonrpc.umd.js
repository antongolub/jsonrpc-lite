!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.jsonrpc={})}(this,function(r){"use strict";var e=Object.prototype.hasOwnProperty,n="function"==typeof Number.isSafeInteger?Number.isSafeInteger:function(r){return"number"==typeof r&&isFinite(r)&&r===Math.floor(r)&&Math.abs(r)<=9007199254740991},t=function(){this.jsonrpc="2.0"};t.prototype.serialize=function(){return JSON.stringify(this)},t.VERSION="2.0";var o=function(r){function e(e,n,t){r.call(this),this.id=e,this.method=n,void 0!==t&&(this.params=t)}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e}(t),i=function(r){function e(e,n){r.call(this),this.method=e,void 0!==n&&(this.params=n)}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e}(t),s=function(r){function e(e,n){r.call(this),this.id=e,this.result=n}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e}(t),a=function(r){function e(e,n){r.call(this),this.id=e,this.error=n,this.id=e,this.error=n}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e}(t),u=function(r,e){this.payload=r,this.type=e,this.payload=r,this.type=e},c=function(r,e,t){this.message=r,this.code=n(e)?e:0,null!=t&&(this.data=t)};function l(r,e,n){var t=new o(r,e,n);return b(t,!0),t}function f(r,e){var n=new i(r,e);return b(n,!0),n}function p(r,e){var n=new s(r,e);return b(n,!0),n}function d(r,e){var n=new a(r,e);return b(n,!0),n}function h(r){if(!g(r))return new u(c.invalidRequest(r),"invalid");var e;try{e=JSON.parse(r)}catch(e){return new u(c.parseError(r),"invalid")}return v(e)}function v(r){if(!Array.isArray(r))return y(r);if(0===r.length)return new u(c.invalidRequest(r),"invalid");for(var e=[],n=0,t=r.length;n<t;n++)e[n]=y(r[n]);return e}c.invalidRequest=function(r){return new c("Invalid request",-32600,r)},c.methodNotFound=function(r){return new c("Method not found",-32601,r)},c.invalidParams=function(r){return new c("Invalid params",-32602,r)},c.internalError=function(r){return new c("Internal error",-32603,r)},c.parseError=function(r){return new c("Parse error",-32700,r)};var m=h;function y(r){var n=null,l=null,f="invalid";if(null==r||r.jsonrpc!==t.VERSION)n=c.invalidRequest(r),f="invalid";else if(e.call(r,"id")){if(e.call(r,"method"))n=b(l=new o(r.id,r.method,r.params)),f="request";else if(e.call(r,"result"))n=b(l=new s(r.id,r.result)),f="success";else if(e.call(r,"error")){var p=r;if(f="error",null==p.error)n=c.internalError(p);else{var d=new c(p.error.message,p.error.code,p.error.data);n=d.message!==p.error.message||d.code!==p.error.code?c.internalError(p):b(l=new a(p.id,d))}}}else n=b(l=new i(r.method,r.params)),f="notification";return null==n&&null!=l?new u(l,f):new u(null!=n?n:c.invalidRequest(r),"invalid")}function b(r,e){var t=null;if(r instanceof o?(null==(t=w(r.id))&&(t=R(r.method)),null==t&&(t=j(r.params))):r instanceof i?null==(t=R(r.method))&&(t=j(r.params)):r instanceof s?null==(t=w(r.id))&&(t=void 0===r.result?c.internalError("Result must exist for success Response objects"):null):r instanceof a&&null==(t=w(r.id,!0))&&(t=function(r){return r instanceof c?n(r.code)?g(r.message)?null:c.internalError("Message must exist or must be a string."):c.internalError("Invalid error code. It must be an integer."):c.internalError("Error must be an instance of JsonRpcError")}(r.error)),e&&null!=t)throw t;return t}function w(r,e){return e&&null===r?null:g(r)||n(r)?null:c.internalError('"id" must be provided, a string or an integer.')}function R(r){return g(r)?null:c.invalidRequest(r)}function j(r){if(void 0===r)return null;if(Array.isArray(r)||null!=(e=r)&&"object"==typeof e&&!Array.isArray(e))try{return JSON.stringify(r),null}catch(e){return c.parseError(r)}var e;return c.invalidParams(r)}function g(r){return""!==r&&"string"==typeof r}var O={JsonRpc:t,JsonRpcError:c,request:l,notification:f,success:p,error:d,parse:h,parseObject:y,parseJsonRpcObject:v,parseJsonRpcString:m};r.JsonRpc=t,r.RequestObject=o,r.NotificationObject=i,r.SuccessObject=s,r.ErrorObject=a,r.JsonRpcParsed=u,r.JsonRpcError=c,r.request=l,r.notification=f,r.success=p,r.error=d,r.parse=h,r.parseJsonRpcObject=v,r.parseJsonRpcString=m,r.parseObject=y,r.jsonrpc=O,r.default=O});
//# sourceMappingURL=jsonrpc.umd.js.map
